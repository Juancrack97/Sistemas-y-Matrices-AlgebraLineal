#include<stdio.h>
int main()
{
	int i,j,k,m,n,matrixtotal;
	int CP=0;
	float A[20][20],c,x[10],sum=0.0;
	printf("Este programa calculara las matrices por el metodo de Gauss Jordan\n");
	printf("Ingrese el numero de matrices\n");
	scanf("%d", &matrixtotal);
	do {
		CP=CP+1;
	printf("Ingrese el tama%co de la fila de la matriz %d\n", 164, CP);
	scanf("%d",&m);
	printf("Ingrese el tama%co de la columna de la matriz %d\n", 164, CP);
	scanf("%d",&n);
	printf("\nNota: Se agregara una columna adicional para el valor independiente\n\n");
	for(i=1; i<=m; i++)
	{
		for(j=1; j<=(n+1); j++)
		{
			printf("Ingrese el elemento fila %d columna %d\n",i,j);
			scanf("%f",&A[i][j]);
		}
	}
	printf("\nMatriz %d\n", CP); /*Aqui se imprime la matriz original*/
	for (i=1; i<=m; i+=1) {
		for (j=1; j<=(n+1); j+=1) {
			printf("%.2f\t", A[i][j]);
		} 
		printf("\n");
	}
	printf("\n");
	for(j=1; j<=n; j++) /*Aqui se resuelve la matriz*/
	{
		for(i=1; i<=m; i++)
		{
			if(i>j)
			{
				c=A[i][j]/A[j][j];
				for(k=1; k<=n+1; k++)
				{
					A[i][k]=A[i][k]-c*A[j][k];
				}
			}
		}
	}
	x[m]=A[m][n+1]/A[m][n];
	/*Se asigna un vector */
	for(i=m-1; i>=1; i--)
	{
		sum=0;
		for(j=i+1; j<=n; j++)
		{
			sum=sum+A[i][j]*x[j];
		}
		x[i]=(A[i][n+1]-sum)/A[i][i];
	}
	for(i=1; i<=m; i++) /*Aqui se cambian los valores restantes por unos y ceros*/
	{
		for(j=1; j<=(n+1); j++)
		{
			if(i==j) {
				A[i][j]=1;
			}
			if(i<j) {
				A[i][j]=0;
			}
		}
	}
	printf("\nLa solucion es: \n"); /*Se imprime aqui la matriz ya resuelta*/ 
	for(i=1; i<=m; i++)
	{
		for(j=1; j<=(n+1); j++)
		{
			if (j==n+1) {
				A[i][j]=x[i];
			}
			printf("%.2f\t", A[i][j]);
		}
		printf("\n");
	}
	printf("\n");
	} while (CP<matrixtotal);
	return(0);
}
